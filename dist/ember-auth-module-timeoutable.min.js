// Generated by EmberScript 0.0.7
var get$=Ember.get;Em.onLoad("Ember.Application",function(e){return e.initializer({name:"ember-auth.module.timeoutable",before:"ember-auth-load",initialize:function(e,t){return t.register("authModule:timeoutable",get$(get$(Em,"Auth"),"TimeoutableAuthModule"),{singleton:!0}),t.inject("authModule:timeoutable","auth","auth:main")}}),e.initializer({name:"ember-auth.module.timeoutable-load",after:"ember-auth-load",initialize:function(e,t){return e.lookup("authModule:timeoutable")}})});var get$=Ember.get,set$=Ember.set;set$(get$(Em,"Auth"),"TimeoutableAuthModule",Ember.Object.extend({init:function(){var e;return get$(this,"auth")._config("timeoutable",get$(this,"_defaultConfig")),null!=get$(this,"config")||set$(this,"config",get$(this,"auth")._config("timeoutable")),null!=get$(get$(this,"config"),"callback")||set$(get$(this,"config"),"callback",(e=this,function(){return get$(e,"auth").signOut()})),get$(this,"auth").addHandler("signInSuccess",get$(this,"register").bind(this)),get$(this,"auth").addHandler("signInError",get$(this,"clear").bind(this)),get$(this,"auth").addHandler("signOutSuccess",get$(this,"clear").bind(this))},_defaultConfig:{period:20,callback:null},_startTime:null,timeout:function(){var e;if(get$(this,"_startTime")===null)return;e=get$(get$(this,"config"),"period")*60*1e3;if(get$(this,"_startTime")-new Date<e)return;return get$(this,"config").callback()},register:function(){var e,t;return set$(this,"_startTime",get$(get$(get$(this,"auth"),"_session"),"startTime")),e=get$(get$(this,"config"),"period")*60*1e3,setTimeout((t=this,function(){return t.timeout()}),e)},reset:function(){return this.register(),set$(this,"_startTime",new Date)},clear:function(){return set$(this,"_startTime",null)}}));